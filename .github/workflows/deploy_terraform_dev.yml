name: "Deploy via Terraform"

on:
  workflow_run:
    workflows: ["Release on Github"]
    branches: [main]
    types:
      - completed

env:
  TF_CLOUD_ORGANIZATION: "${{ secrets.TF_CLOUD_ORGANIZATION }}"
  TF_API_TOKEN: "${{ secrets.TF_API_TOKEN }}"
  TF_WORKSPACE: "${{ secrets.TF_WORKSPACE }}"

permissions:
  contents: read

jobs:
  environment: development
  terraform_deploy_dev:
    uses: ./.github/workflows/reusable_deploy_terraform.yml
    secrets: inherit
